[gd_scene load_steps=18 format=3 uid="uid://b2duvi8qycevc"]

[ext_resource type="Script" uid="uid://bpdrogaj804tv" path="res://scripts/level_manager.gd" id="1_p4h1g"]
[ext_resource type="PackedScene" uid="uid://bnrfbc0r743el" path="res://assets/wall_double_height.glb" id="2_0o5uc"]
[ext_resource type="PackedScene" uid="uid://dogdqgqh53qlb" path="res://scenes/modules/stone_floor.tscn" id="2_28uad"]
[ext_resource type="PackedScene" uid="uid://6nkm1wqksnpr" path="res://scenes/modules/wood_spikes.tscn" id="3_kpe18"]
[ext_resource type="PackedScene" uid="uid://4ujwab1qrg34" path="res://assets/bookshelf.glb" id="4_5plx4"]
[ext_resource type="PackedScene" uid="uid://cvvkkstybm1eo" path="res://scenes/modules/rising_stairs.tscn" id="4_moukm"]
[ext_resource type="PackedScene" uid="uid://b1a330fk83uh3" path="res://scenes/modules/chest.tscn" id="5_gbvnp"]
[ext_resource type="PackedScene" uid="uid://c53cdnyfl58k4" path="res://assets/wall.glb" id="5_junyj"]
[ext_resource type="PackedScene" uid="uid://b2sk86fpnbjl6" path="res://scenes/modules/raft.tscn" id="6_0hhvs"]
[ext_resource type="PackedScene" uid="uid://81yp7r70o1ys" path="res://scenes/modules/lever.tscn" id="6_fnc5y"]
[ext_resource type="PackedScene" uid="uid://b2hmjdepy4xqs" path="res://scenes/modules/barrel.tscn" id="6_uaccg"]
[ext_resource type="PackedScene" uid="uid://svndairma008" path="res://scenes/modules/wall_bridge_board.tscn" id="10_l21gw"]
[ext_resource type="PackedScene" uid="uid://okm436545ts" path="res://scenes/modules/key.tscn" id="12_ltqvu"]
[ext_resource type="PackedScene" uid="uid://b54qgrikytn57" path="res://scenes/modules/ledge.tscn" id="13_w2m0q"]
[ext_resource type="PackedScene" uid="uid://ckxs5gl0peai3" path="res://scenes/modules/water.tscn" id="14_2cyag"]
[ext_resource type="PackedScene" uid="uid://dj6uaupgnjtgm" path="res://scenes/characters/robot.tscn" id="15_icdga"]

[sub_resource type="BoxShape3D" id="BoxShape3D_vflf8"]
size = Vector3(0.25, 3, 16)

[node name="Level" type="Node3D"]
script = ExtResource("1_p4h1g")

[node name="room1" type="Node3D" parent="."]

[node name="StoneFloor" parent="room1" instance=ExtResource("2_28uad")]

[node name="StoneFloor6" parent="room1" instance=ExtResource("2_28uad")]
transform = Transform3D(-2.3167e-08, -1, 0, 0.53, -4.37114e-08, 0, 0, 0, 1, -1, -0.53, 0)

[node name="StoneFloor7" parent="room1" instance=ExtResource("2_28uad")]
transform = Transform3D(2.3167e-08, 1, 1.50996e-07, 0.53, -4.37114e-08, 0, 3.49812e-15, 1.50996e-07, -1, -3, -0.53, 0)

[node name="StoneFloor8" parent="room1" instance=ExtResource("2_28uad")]
transform = Transform3D(1.01266e-15, 4.37114e-08, -1, 0.53, -4.37114e-08, 0, -2.3167e-08, -1, -4.37114e-08, -2, -0.53, 1)

[node name="StoneFloor2" parent="room1" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 0, 0)

[node name="StoneFloor3" parent="room1" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 0, 2)

[node name="StoneFloor4" parent="room1" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 0, 2)

[node name="StoneFloor5" parent="room1" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 2)

[node name="wall_double_height" parent="room1" instance=ExtResource("2_0o5uc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1)

[node name="wall_double_height2" parent="room1" instance=ExtResource("2_0o5uc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 0, -1)

[node name="wall_double_height3" parent="room1" instance=ExtResource("2_0o5uc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 0, -1)

[node name="wall_double_height4" parent="room1" instance=ExtResource("2_0o5uc")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -4.9, 0, 0)

[node name="wall_double_height5" parent="room1" instance=ExtResource("2_0o5uc")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -4.9, 0, 2)

[node name="wall_double_height6" parent="room1" instance=ExtResource("2_0o5uc")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0.9, 0, 0)

[node name="wall_double_height7" parent="room1" instance=ExtResource("2_0o5uc")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0.9, 0, 2)

[node name="bookshelf" parent="room1" instance=ExtResource("4_5plx4")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -4.525, 0, 2)

[node name="Chest" parent="room1" instance=ExtResource("5_gbvnp")]
transform = Transform3D(1.31134e-07, 0, 1, 0, 1, 0, -1, 0, 1.31134e-07, 0.478412, 0.0137056, 2.3)

[node name="Barrel" parent="room1" instance=ExtResource("6_uaccg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5, 0, 1)

[node name="Barrel2" parent="room1" instance=ExtResource("6_uaccg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5, 0, 1.5)

[node name="Lever" parent="room1" instance=ExtResource("6_fnc5y")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, -4.3, 0, 0.8)

[node name="Stairs" parent="room1" instance=ExtResource("4_moukm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, -1, 0)

[node name="room2" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -4)

[node name="StoneFloor4" parent="room2" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, -1, 0)

[node name="StoneFloor5" parent="room2" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, -1, 0)

[node name="StoneFloor6" parent="room2" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="StoneFloor7" parent="room2" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, -1, 2)

[node name="StoneFloor8" parent="room2" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, -1, 2)

[node name="StoneFloor9" parent="room2" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 2)

[node name="WoodSpikes" parent="room2" instance=ExtResource("3_kpe18")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0, -1, 0)

[node name="WoodSpikes2" parent="room2" instance=ExtResource("3_kpe18")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -2, -1, 0)

[node name="WoodSpikes3" parent="room2" instance=ExtResource("3_kpe18")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -4, -1, 0)

[node name="WoodSpikes4" parent="room2" instance=ExtResource("3_kpe18")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0, -1, 2)

[node name="WoodSpikes5" parent="room2" instance=ExtResource("3_kpe18")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -2, -1, 2)

[node name="WoodSpikes6" parent="room2" instance=ExtResource("3_kpe18")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -4, -1, 2)

[node name="WallBridgeBoard" parent="room2" instance=ExtResource("10_l21gw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.03, 0.301958, 1.95322)

[node name="WallBridgeBoard2" parent="room2" instance=ExtResource("10_l21gw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.03, 0, 0.352138)

[node name="wall_double_height" parent="room2" instance=ExtResource("2_0o5uc")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0.9, 0, 0)

[node name="wall_double_height2" parent="room2" instance=ExtResource("2_0o5uc")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0.9, 0, 2)

[node name="wall_double_height3" parent="room2" instance=ExtResource("2_0o5uc")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -4.9, 0, 0)

[node name="wall_double_height4" parent="room2" instance=ExtResource("2_0o5uc")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -4.9, 0, 2)

[node name="room3" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -8)

[node name="StoneFloor" parent="room3" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="StoneFloor2" parent="room3" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, -1, 0)

[node name="StoneFloor3" parent="room3" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, -1, 2)

[node name="StoneFloor4" parent="room3" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, -1, 2)

[node name="StoneFloor6" parent="room3" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, -1, 0)

[node name="StoneFloor5" parent="room3" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 2)

[node name="StoneFloor7" parent="room3" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, -4)

[node name="StoneFloor8" parent="room3" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, -1, -4)

[node name="StoneFloor9" parent="room3" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, -1, -2)

[node name="StoneFloor10" parent="room3" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, -1, -2)

[node name="StoneFloor11" parent="room3" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, -1, -4)

[node name="StoneFloor12" parent="room3" instance=ExtResource("2_28uad")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, -2)

[node name="wall_double_height" parent="room3" instance=ExtResource("2_0o5uc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -5)

[node name="wall_double_height2" parent="room3" instance=ExtResource("2_0o5uc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 0, -5)

[node name="wall_double_height3" parent="room3" instance=ExtResource("2_0o5uc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 0, -5)

[node name="wall_double_height4" parent="room3" instance=ExtResource("2_0o5uc")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -4.9, 0, 0)

[node name="wall_double_height8" parent="room3" instance=ExtResource("2_0o5uc")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -4.9, 0, -2)

[node name="wall_double_height9" parent="room3" instance=ExtResource("2_0o5uc")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -4.9, 0, -4)

[node name="wall_double_height5" parent="room3" instance=ExtResource("2_0o5uc")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -4.9, 0, 2)

[node name="wall_double_height6" parent="room3" instance=ExtResource("2_0o5uc")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0.9, 0, 0)

[node name="wall_double_height10" parent="room3" instance=ExtResource("2_0o5uc")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0.9, 0, -2)

[node name="wall_double_height11" parent="room3" instance=ExtResource("2_0o5uc")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0.9, 0, -4)

[node name="wall_double_height7" parent="room3" instance=ExtResource("2_0o5uc")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0.9, 0, 2)

[node name="wall" parent="room3" instance=ExtResource("5_junyj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 3)

[node name="wall2" parent="room3" instance=ExtResource("5_junyj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, -1, 3)

[node name="wall3" parent="room3" instance=ExtResource("5_junyj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, -1, 3)

[node name="Ledge2" parent="room3" instance=ExtResource("13_w2m0q")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.40263, 0, -2.64335)

[node name="Key" parent="room3" instance=ExtResource("12_ltqvu")]
transform = Transform3D(-0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, -0.707107, -0.329288, 0.1, -2.643)

[node name="Ledge4" parent="room3" instance=ExtResource("13_w2m0q")]
transform = Transform3D(-1, 0, -1.50996e-07, 0, 1, 0, 1.50996e-07, 0, -1, 0.397, 0, -2.643)

[node name="Raft" parent="room3" instance=ExtResource("6_0hhvs")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -2, -0.35724, 1)

[node name="Water" parent="room3" instance=ExtResource("14_2cyag")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.4, 2)

[node name="Water2" parent="room3" instance=ExtResource("14_2cyag")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, -0.4, 2)

[node name="Water3" parent="room3" instance=ExtResource("14_2cyag")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, -0.4, 2)

[node name="Water4" parent="room3" instance=ExtResource("14_2cyag")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, -0.4, 0)

[node name="Water5" parent="room3" instance=ExtResource("14_2cyag")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, -0.4, 0)

[node name="Water6" parent="room3" instance=ExtResource("14_2cyag")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.4, 0)

[node name="Water7" parent="room3" instance=ExtResource("14_2cyag")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.4, -2)

[node name="Water8" parent="room3" instance=ExtResource("14_2cyag")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, -0.4, -2)

[node name="Water9" parent="room3" instance=ExtResource("14_2cyag")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, -0.4, -2)

[node name="Water10" parent="room3" instance=ExtResource("14_2cyag")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, -0.4, -4)

[node name="Water11" parent="room3" instance=ExtResource("14_2cyag")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, -0.4, -4)

[node name="Water12" parent="room3" instance=ExtResource("14_2cyag")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.4, -4)

[node name="Robot" parent="." node_paths=PackedStringArray("camera_x_rotation", "animation_player", "robot_visual") instance=ExtResource("15_icdga")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.1, 0.156, 2)
camera_x_rotation = NodePath("CameraXRotation")
animation_player = NodePath("robot/AnimationPlayer")
robot_visual = NodePath("robot")

[node name="AIController3D" parent="Robot" index="3" node_paths=PackedStringArray("raycast_sensors", "chest", "key", "lever", "raft")]
raycast_sensors = [NodePath("../RaycastSensors/ForwardSensor"), NodePath("../RaycastSensors/FloorSensor")]
chest = NodePath("../../room1/Chest")
key = NodePath("../../room3/Key")
lever = NodePath("../../room1/Lever")
raft = NodePath("../../room3/Raft")

[node name="AdditionalColliders" type="StaticBody3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="AdditionalColliders"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.9, 1, -5)
shape = SubResource("BoxShape3D_vflf8")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="AdditionalColliders"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.9, 1, -5)
shape = SubResource("BoxShape3D_vflf8")

[connection signal="opened" from="room1/Chest" to="Robot" method="_on_chest_opened"]
[connection signal="activated" from="room1/Lever" to="room1/Stairs" method="_on_lever_activated"]
[connection signal="activated" from="room1/Lever" to="Robot" method="_on_lever_activated"]
[connection signal="body_entered" from="room1/Lever" to="room1/Lever" method="_on_body_entered"]
[connection signal="body_exited" from="room1/Lever" to="room1/Lever" method="_on_body_exited"]
[connection signal="collected" from="room3/Key" to="room1/Chest" method="_on_key_collected"]
[connection signal="collected" from="room3/Key" to="Robot" method="_on_key_collected"]

[editable path="Robot"]
[editable path="Robot/robot"]
